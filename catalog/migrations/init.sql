CREATE TABLE sellers (
    id UUID PRIMARY KEY,
    shop_name TEXT NOT NULL,
    description TEXT,
    user_id UUID NOT NULL
);

-- Таблица категорий
CREATE TABLE categories (
    id UUID PRIMARY KEY,
    name TEXT NOT NULL,
    parent_id UUID REFERENCES categories(id) ON DELETE SET NULL
);

-- Таблица товаров
CREATE TABLE products (
    id UUID PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT,
    price INT NOT NULL CHECK (price >= 0),
    seller_id UUID NOT NULL REFERENCES sellers(id) ON DELETE CASCADE,
    category_id UUID REFERENCES categories(id) ON DELETE SET NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);



-- CREATE INDEX idx_inventory_user ON inventory(user_id);


-- Вставка продавцов
INSERT INTO sellers (id, shop_name, description, user_id) VALUES
  ('11111111-1111-1111-1111-111111111111', 'TechWorld', 'Гаджеты и электроника', 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'),
  ('22222222-2222-2222-2222-222222222222', 'HomeStyle', 'Товары для дома', 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb'),
  ('33333333-3333-3333-3333-333333333333', 'FashionX', 'Одежда и аксессуары', 'cccccccc-cccc-cccc-cccc-cccccccccccc');

-- Вставка категорий
INSERT INTO categories (id, name, parent_id) VALUES
  ('10000000-0000-0000-0000-000000000001', 'Электроника', NULL),
  ('10000000-0000-0000-0000-000000000002', 'Бытовая техника', NULL),
  ('10000000-0000-0000-0000-000000000003', 'Одежда', NULL),
  ('10000000-0000-0000-0000-000000000004', 'Смартфоны', '10000000-0000-0000-0000-000000000001'),
  ('10000000-0000-0000-0000-000000000005', 'Мужская одежда', '10000000-0000-0000-0000-000000000003');

-- Вставка товаров (10 штук)
INSERT INTO products (id, name, description, price, seller_id, category_id, created_at) VALUES
  ('00000000-0000-0000-0000-000000000001', 'iPhone 14 Pro', 'Смартфон от Apple', 130000, '11111111-1111-1111-1111-111111111111', '10000000-0000-0000-0000-000000000004', NOW()),
  ('00000000-0000-0000-0000-000000000002', 'Samsung Galaxy S23', 'Флагман от Samsung', 120000, '11111111-1111-1111-1111-111111111111', '10000000-0000-0000-0000-000000000004', NOW()),
  ('00000000-0000-0000-0000-000000000003', 'Стиральная машина LG', 'Фронтальная загрузка, 7 кг', 40000, '22222222-2222-2222-2222-222222222222', '10000000-0000-0000-0000-000000000002', NOW()),
  ('00000000-0000-0000-0000-000000000004', 'Пылесос Dyson', 'Вертикальный беспроводной пылесос', 35000, '22222222-2222-2222-2222-222222222222', '10000000-0000-0000-0000-000000000002', NOW()),
  ('00000000-0000-0000-0000-000000000005', 'Кофеварка DeLonghi', 'Эспрессо-машина с капучинатором', 28000, '22222222-2222-2222-2222-222222222222', '10000000-0000-0000-0000-000000000002', NOW()),
  ('00000000-0000-0000-0000-000000000006', 'Мужская куртка The North Face', 'Тёплая и ветронепроницаемая', 16000, '33333333-3333-3333-3333-333333333333', '10000000-0000-0000-0000-000000000005', NOW()),
  ('00000000-0000-0000-0000-000000000007', 'Футболка Nike', 'Классическая мужская футболка', 2900, '33333333-3333-3333-3333-333333333333', '10000000-0000-0000-0000-000000000005', NOW()),
  ('00000000-0000-0000-0000-000000000008', 'Кроссовки Adidas Ultraboost', 'Удобные беговые кроссовки', 11000, '33333333-3333-3333-3333-333333333333', '10000000-0000-0000-0000-000000000005', NOW()),
  ('00000000-0000-0000-0000-000000000009', 'Ноутбук MacBook Air M2', 'Лёгкий и мощный', 150000, '11111111-1111-1111-1111-111111111111', '10000000-0000-0000-0000-000000000001', NOW()),
  ('00000000-0000-0000-0000-000000000010', 'Планшет iPad Air', 'С поддержкой Apple Pencil', 75000, '11111111-1111-1111-1111-111111111111', '10000000-0000-0000-0000-000000000001', NOW());
